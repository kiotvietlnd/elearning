<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nghị Định 70/2025/NĐ-CP: Cẩm Nang Hóa Đơn Điện Tử Cho Hộ Kinh Doanh</title>
    <meta name="description" content="Hướng dẫn chi tiết Nghị định 70/2025/NĐ-CP về Hóa đơn điện tử: Quy định khởi tạo từ máy tính tiền, cấp theo từng lần phát sinh và xử lý sai sót chuẩn xác.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #f0f9ff; /* Sky-50 */
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f0f9ff; }
        ::-webkit-scrollbar-thumb { background: #93c5fd; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #3b82f6; }

        /* Animation */
        @keyframes moveInCircle { 0% { transform: rotate(0deg); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
        @keyframes moveVertical { 0% { transform: translateY(-50%); } 50% { transform: translateY(50%); } 100% { transform: translateY(-50%); } }
        @keyframes moveHorizontal { 0% { transform: translateX(-50%); } 50% { transform: translateX(50%); } 100% { transform: translateX(-50%); } }
        
        .soft-glow-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; background: linear-gradient(135deg, #ffffff 0%, #e0f2fe 50%, #dcfce7 100%); }
        .soft-glow-background .shape { position: absolute; filter: blur(120px); opacity: 0.6; }
        .shape1 { height: 400px; width: 400px; background: #bae6fd; border-radius: 50%; top: -50px; left: -100px; animation: moveInCircle 25s ease-in-out infinite; }
        .shape2 { height: 450px; width: 450px; background: #bbf7d0; border-radius: 50%; bottom: -100px; right: -100px; animation: moveVertical 30s ease-in-out infinite; }
        .shape3 { height: 300px; width: 500px; background: #a5f3fc; border-radius: 50%; top: 50%; left: 50%; animation: moveHorizontal 40s ease-in-out infinite; }

        /* TOC Active State */
        .toc-link.active { color: #1e3a8a; border-left: 3px solid #2563eb; background: #eff6ff; font-weight: 600; }
        
        /* Table Style */
        .tax-table { width: 100%; border-collapse: separate; border-spacing: 0; border-radius: 8px; overflow: hidden; border: 1px solid #e2e8f0; font-size: 0.95rem; margin-bottom: 1.5rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        .tax-table th { background-color: #eff6ff; color: #1e40af; padding: 12px 16px; text-align: left; font-weight: 700; border-bottom: 2px solid #bfdbfe; }
        .tax-table td { padding: 12px 16px; border-bottom: 1px solid #f1f5f9; color: #334155; vertical-align: top; }
        .tax-table tr:nth-child(even) { background-color: #f8fafc; }
        .tax-table tr:last-child td { border-bottom: none; }
        
        .float-btn { transition: transform 0.2s; }
        .float-btn:hover { transform: scale(1.1); }
    </style>
</head>
<body id="top" class="text-slate-700 antialiased selection:bg-blue-100 selection:text-blue-900">

    <div class="soft-glow-background"><div class="shape shape1"></div><div class="shape shape2"></div><div class="shape shape3"></div></div>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-white/50 h-20 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center justify-between">
            <a href="index.html" class="flex-shrink-0 flex items-center gap-3 select-none hover:opacity-80 transition-opacity">
                <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8">
                <span class="text-slate-300 font-light text-2xl">|</span>
                <span class="font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-green-700 tracking-tight text-lg uppercase">E-Learning</span>
            </a>
            <a href="index.html" class="flex items-center gap-2 text-sm font-bold text-blue-600 hover:text-blue-800 transition-colors">
                <i class="fa-solid fa-arrow-left"></i> Quay lại Cẩm nang
            </a>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[80vh]">
        <!-- Breadcrumb -->
        <nav class="flex mb-6 text-sm text-slate-500" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                <li class="inline-flex items-center"><a href="index.html" class="inline-flex items-center hover:text-blue-600"><i class="fa-solid fa-home mr-2"></i> Trang chủ</a></li>
                <li><div class="flex items-center"><i class="fa-solid fa-chevron-right text-slate-400 mx-2"></i><span class="text-slate-700 font-medium">Cẩm nang Thuế</span></div></li>
            </ol>
        </nav>

        <div class="flex flex-col lg:flex-row gap-10">
            <!-- Sidebar TOC -->
            <aside class="lg:w-1/4 hidden lg:block">
                <div class="sticky top-28 bg-white/80 backdrop-blur p-5 rounded-2xl shadow-md border border-white/60">
                    <h3 class="font-bold text-blue-900 mb-4 border-b border-slate-100 pb-2 uppercase text-xs tracking-wider">Mục lục bài viết</h3>
                    <nav class="space-y-1" id="toc">
                        <a href="#intro" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">Giới thiệu Nghị định 70</a>
                        <a href="#section-1" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">1. HĐĐT từ Máy tính tiền</a>
                        <a href="#section-2" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">2. Cấp HĐĐT từng lần</a>
                        <a href="#section-3" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">3. Trường hợp ngừng sử dụng</a>
                        <a href="#section-4" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">4. Xử lý sai sót</a>
                        <a href="#section-5" class="toc-link block px-3 py-2 text-sm text-slate-600 hover:text-blue-600 rounded-r-lg transition-all border-l-2 border-transparent">Kết luận & Giải pháp</a>
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <article class="lg:w-3/4 w-full space-y-10 pb-10">
                <div class="text-center lg:text-left border-b border-slate-200 pb-6" id="intro">
                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border border-blue-200">Pháp lý & Thuế</span>
                    <h1 class="text-3xl md:text-4xl font-black text-blue-900 mt-4 mb-4 leading-tight">Nghị Định 70/2025/NĐ-CP: Cẩm Nang Toàn Diện Cho Hộ Kinh Doanh Về Hóa Đơn Điện Tử</h1>
                    <div class="flex items-center gap-4 text-sm text-slate-500 italic justify-center lg:justify-start">
                        <span><i class="fa-regular fa-clock mr-1"></i> Cập nhật lần cuối: 06/01/2026</span>
                        <span><i class="fa-solid fa-user-pen mr-1"></i> LND Department</span>
                    </div>
                </div>

                <!-- Introduction -->
                <div class="bg-white border border-blue-100 rounded-xl p-6 shadow-sm" data-aos="fade-up">
                    <p class="leading-relaxed text-slate-700 mb-4">
                        Được ban hành ngày 20/03/2025 và có hiệu lực từ <strong class="text-blue-700">01/06/2025</strong>, Nghị định 70/2025/NĐ-CP sửa đổi Nghị định 123/2020/NĐ-CP là bước ngoặt trong quản lý thuế, tác động trực tiếp đến hàng triệu hộ kinh doanh.
                    </p>
                    <p class="leading-relaxed text-slate-700">
                        Cẩm nang này sẽ "giải mã" các quy định cốt lõi, giúp hộ kinh doanh nắm bắt cơ hội hiện đại hóa và tuân thủ pháp luật để tránh rủi ro không đáng có.
                    </p>
                </div>

                <!-- Section 1 -->
                <section id="section-1" class="scroll-mt-28" data-aos="fade-up">
                    <h2 class="text-2xl font-bold text-blue-900 mb-6 flex items-center gap-3">
                        <span class="bg-white text-blue-600 w-10 h-10 flex items-center justify-center rounded-full text-lg font-black border border-blue-200 shadow-sm">1</span> 
                        Hóa Đơn Điện Tử Khởi Tạo Từ Máy Tính Tiền
                    </h2>
                    <p class="leading-relaxed mb-4 text-slate-700">
                        Đây là yêu cầu bắt buộc mới đối với lĩnh vực bán lẻ, nhà hàng, khách sạn. Điều 11 Nghị định 70 cụ thể hóa các yêu cầu sau:
                    </p>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                            <h4 class="font-bold text-blue-900 mb-2 flex items-center gap-2"><i class="fa-solid fa-wifi text-blue-500"></i> Kết nối dữ liệu</h4>
                            <p class="text-sm text-slate-600">Máy tính tiền phải kết nối chuyển dữ liệu điện tử tự động và tức thời đến cơ quan thuế sau mỗi giao dịch.</p>
                        </div>
                        <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                            <h4 class="font-bold text-blue-900 mb-2 flex items-center gap-2"><i class="fa-solid fa-list-check text-blue-500"></i> Nội dung hóa đơn</h4>
                            <ul class="text-sm text-slate-600 list-disc ml-4 space-y-1">
                                <li>Thông tin Người bán (Tên, Đ/c, MST).</li>
                                <li><strong>Thông tin Người mua</strong> (nếu có yêu cầu).</li>
                                <li>Chi tiết hàng hóa, giá bán, các loại thuế suất.</li>
                                <li>Mã cơ quan thuế (tự động khởi tạo).</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg text-yellow-900 text-sm shadow-sm">
                        <strong>Lưu ý quan trọng:</strong> Hộ kinh doanh phải có quy trình để ghi nhận thông tin người mua (MST/CCCD) ngay khi khách hàng yêu cầu để đảm bảo hóa đơn hợp lệ.
                    </div>
                </section>

                <!-- Section 2 -->
                <section id="section-2" class="scroll-mt-28" data-aos="fade-up">
                    <h2 class="text-2xl font-bold text-blue-900 mb-6 flex items-center gap-3">
                        <span class="bg-white text-blue-600 w-10 h-10 flex items-center justify-center rounded-full text-lg font-black border border-blue-200 shadow-sm">2</span> 
                        Cấp HĐĐT Có Mã Theo Từng Lần Phát Sinh
                    </h2>
                    <p class="leading-relaxed mb-6 text-slate-700">Giải pháp cho hộ kinh doanh không thường xuyên xuất hóa đơn. Quy trình 3 bước đơn giản:</p>

                    <div class="space-y-4">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mt-1">1</div>
                            <div class="bg-white p-4 rounded-lg border border-slate-100 shadow-sm w-full">
                                <h4 class="font-bold text-slate-800">Chuẩn bị hồ sơ</h4>
                                <p class="text-sm text-slate-600 mt-1">Lập tờ khai Mẫu số <strong>06/ĐN-PSĐT</strong> (kê khai thông tin giao dịch, người mua, các loại thuế).</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold mt-1">2</div>
                            <div class="bg-white p-4 rounded-lg border border-slate-100 shadow-sm w-full">
                                <h4 class="font-bold text-slate-800">Gửi đề nghị & Nộp thuế</h4>
                                <p class="text-sm text-slate-600 mt-1">Nộp qua Cổng thông tin Tổng cục Thuế và hoàn thành nghĩa vụ nộp thuế phát sinh.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold mt-1">3</div>
                            <div class="bg-white p-4 rounded-lg border border-slate-100 shadow-sm w-full">
                                <h4 class="font-bold text-slate-800">Nhận hóa đơn</h4>
                                <p class="text-sm text-slate-600 mt-1">Cơ quan thuế cấp mã và gửi hóa đơn điện tử cho hộ kinh doanh <strong>ngay trong ngày</strong> làm việc.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3 -->
                <section id="section-3" class="scroll-mt-28" data-aos="fade-up">
                    <h2 class="text-2xl font-bold text-blue-900 mb-6 flex items-center gap-3">
                        <span class="bg-white text-blue-600 w-10 h-10 flex items-center justify-center rounded-full text-lg font-black border border-blue-200 shadow-sm">3</span> 
                        Những Trường Hợp Bị Ngừng Sử Dụng Hóa Đơn
                    </h2>
                    <p class="leading-relaxed mb-4 text-slate-700">Điều 16 quy định các trường hợp rủi ro mà hộ kinh doanh cần tuyệt đối tránh:</p>
                    
                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-ban"></i> Chấm dứt hiệu lực MST / Tạm ngừng KD.</li>
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-location-dot"></i> Không hoạt động tại địa chỉ đăng ký.</li>
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-gavel"></i> Bị cưỡng chế nợ thuế.</li>
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-triangle-exclamation"></i> Mua bán hóa đơn, bán hàng lậu/giả.</li>
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-server"></i> Không đáp ứng hạ tầng CNTT.</li>
                        <li class="flex items-center gap-2 text-sm bg-red-50 p-3 rounded text-red-800 border border-red-100"><i class="fa-solid fa-file-invoice"></i> Rủi ro cao về thuế & không giải trình.</li>
                    </ul>
                </section>

                <!-- Section 4 -->
                <section id="section-4" class="scroll-mt-28" data-aos="fade-up">
                    <h2 class="text-2xl font-bold text-blue-900 mb-6 flex items-center gap-3">
                        <span class="bg-white text-blue-600 w-10 h-10 flex items-center justify-center rounded-full text-lg font-black border border-blue-200 shadow-sm">4</span> 
                        Hướng Dẫn Xử Lý Hóa Đơn Có Sai Sót (Điều 19)
                    </h2>
                    
                    <div class="overflow-x-auto rounded-lg border border-slate-200 shadow-sm mb-6">
                        <table class="tax-table mb-0">
                            <thead>
                                <tr>
                                    <th width="40%">Tình huống sai sót</th>
                                    <th width="60%">Hướng dẫn xử lý</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Sai sót về <strong>tên, địa chỉ</strong> người mua (MST và nội dung khác đúng).</td>
                                    <td>
                                        <ul class="list-disc ml-4 text-sm space-y-1">
                                            <li>Thông báo cho người mua.</li>
                                            <li><strong>Không cần</strong> lập lại hóa đơn.</li>
                                            <li>Gửi Mẫu <strong>04/SS-HĐĐT</strong> cho cơ quan thuế.</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Sai sót về <strong>MST, số tiền, thuế suất</strong> hoặc hàng hóa.</td>
                                    <td>
                                        <p class="text-sm mb-2">Lựa chọn 1 trong 2 cách:</p>
                                        <ul class="list-decimal ml-4 text-sm space-y-1 mb-2">
                                            <li>Lập hóa đơn <strong>Điều chỉnh</strong>.</li>
                                            <li>Lập hóa đơn <strong>Thay thế</strong>.</li>
                                        </ul>
                                        <p class="text-xs text-slate-500 italic">Lưu ý: Hóa đơn mới phải ghi rõ "Điều chỉnh/Thay thế cho hóa đơn số... ngày..."</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Cơ quan thuế phát hiện sai sót.</td>
                                    <td>
                                        <ul class="list-disc ml-4 text-sm space-y-1">
                                            <li>Nhận thông báo rà soát (Mẫu 01/TB-RSĐT).</li>
                                            <li>Kiểm tra và gửi lại Mẫu <strong>04/SS-HĐĐT</strong> để giải trình.</li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Conclusion & Solution -->
                <section id="section-5" class="mt-10 border-t border-slate-200 pt-8" data-aos="fade-up">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">Kết luận: Giải Pháp Toàn Diện Từ KiotViet</h3>
                    <p class="text-slate-700 mb-6 leading-relaxed">
                        Nghị định 70 yêu cầu sự chính xác và tính kịp thời trong dữ liệu. KiotViet cung cấp hệ sinh thái công nghệ giúp bạn biến nghĩa vụ pháp lý thành lợi thế vận hành:
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                        <div class="flex gap-3">
                            <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600 flex-shrink-0"><i class="fa-solid fa-cash-register"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm">Phần mềm Bán hàng</h4>
                                <p class="text-xs text-slate-500 mt-1">Khởi tạo HĐĐT trực tiếp từ máy tính tiền, truyền dữ liệu tự động.</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center text-green-600 flex-shrink-0"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm">Dịch vụ Hóa đơn điện tử</h4>
                                <p class="text-xs text-slate-500 mt-1">Chuẩn định dạng Nghị định 70, hỗ trợ điều chỉnh/thay thế dễ dàng.</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center text-purple-600 flex-shrink-0"><i class="fa-solid fa-signature"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm">Chữ ký số an toàn</h4>
                                <p class="text-xs text-slate-500 mt-1">Tích hợp sẵn, ký và phát hành nhanh chóng không cần thiết bị cứng.</p>
                            </div>
                        </div>
                        <div class="flex gap-3">
                            <div class="w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 flex-shrink-0"><i class="fa-solid fa-calculator"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm">Phần mềm Kế toán</h4>
                                <p class="text-xs text-slate-500 mt-1">Đồng bộ doanh thu, quản lý đầu vào, tự động hóa sổ sách.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-center">
                        <a href="https://vanban.chinhphu.vn/?pageid=27160&docid=213179" target="_blank" class="inline-flex items-center gap-3 px-5 py-3 bg-slate-50 text-blue-700 font-semibold rounded-lg border border-slate-200 hover:bg-white hover:border-blue-300 hover:shadow-md transition-all group">
                            <span class="w-8 h-8 bg-white border border-slate-200 rounded-full flex items-center justify-center text-slate-600 group-hover:text-blue-600 group-hover:border-blue-200 transition-colors">
                                <i class="fa-solid fa-file-shield"></i>
                            </span>
                            Xem Văn bản gốc (Chinhphu.vn)
                            <i class="fa-solid fa-arrow-up-right-from-square text-xs ml-1 opacity-70"></i>
                        </a>
                    </div>
                </section>

            </article>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white/60 backdrop-blur-md border-t border-white/50 mt-10 py-8 relative z-10">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <div class="inline-block mb-4"><img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8 mx-auto"></div>
            <p class="text-slate-500 font-medium text-sm">Learning and Development Department</p>
            <p class="text-slate-400 text-xs mt-2">© 2026 KiotViet. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- Floating Buttons -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-center space-y-3">
        <a href="https://notebooklm.google.com/notebook/17ae9fc0-6d1b-4ab5-ab0f-3f980651062e" target="_blank" class="float-btn w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-full flex items-center justify-center shadow-lg border-2 border-white hover:scale-110"><i class="fa-solid fa-robot"></i></a>
        <a id="scroll-to-top" href="#top" title="Lên đầu Trang" class="hidden w-12 h-12 bg-white text-slate-600 border border-slate-200 rounded-full items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 hover:bg-slate-50"><i class="fas fa-arrow-up"></i></a>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AOS.init({ once: true, duration: 800, easing: 'ease-out-cubic', offset: 50 });
            const scrollTopBtn = document.getElementById('scroll-to-top');
            window.onscroll = function() {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) { scrollTopBtn.classList.remove('hidden'); scrollTopBtn.classList.add('flex'); } 
                else { scrollTopBtn.classList.add('hidden'); scrollTopBtn.classList.remove('flex'); }
            };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('.toc-link').forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) link.classList.add('active');
                        });
                    }
                });
            }, { rootMargin: '-20% 0px -60% 0px' });
            document.querySelectorAll('section, #intro').forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
