<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiotViet - Cẩm nang Thuế HKD & E-Learning</title>
    <meta name="description" content="Tổng hợp kiến thức pháp luật và Bộ giải pháp tuân thủ HĐĐT - Thuế - Kế toán dành cho HKD.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #f0f9ff; /* Sky-50 - Original */
        }

        /* Custom Scrollbar - Blue/Cool Tones - Original */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f0f9ff; }
        ::-webkit-scrollbar-thumb { background: #93c5fd; border-radius: 3px; } /* Blue-300 */
        ::-webkit-scrollbar-thumb:hover { background: #3b82f6; } /* Blue-500 */

        /* Background Animation */
        @keyframes moveInCircle { 0% { transform: rotate(0deg); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
        @keyframes moveVertical { 0% { transform: translateY(-50%); } 50% { transform: translateY(50%); } 100% { transform: translateY(-50%); } }
        @keyframes moveHorizontal { 0% { transform: translateX(-50%); } 50% { transform: translateX(50%); } 100% { transform: translateX(-50%); } }
        
        .soft-glow-background { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; 
            /* Original Fresh Gradient: White -> Light Blue -> Light Green */
            background: linear-gradient(135deg, #ffffff 0%, #e0f2fe 50%, #dcfce7 100%);
        }
        .soft-glow-background .shape { position: absolute; filter: blur(120px); opacity: 0.6; }
        .soft-glow-background .shape1 { height: 400px; width: 400px; background: #bae6fd; border-radius: 50%; top: -50px; left: -100px; animation: moveInCircle 25s ease-in-out infinite; } /* Sky-200 */
        .soft-glow-background .shape2 { height: 450px; width: 450px; background: #bbf7d0; border-radius: 50%; bottom: -100px; right: -100px; animation: moveVertical 30s ease-in-out infinite; } /* Green-200 */
        .soft-glow-background .shape3 { height: 300px; width: 500px; background: #a5f3fc; border-radius: 50%; top: 50%; left: 50%; animation: moveHorizontal 40s ease-in-out infinite; } /* Cyan-200 */

        .nav-link.active {
            color: #2563eb; /* Blue-600 */
            border-bottom-color: #2563eb;
        }

        /* Sidebar Navigation Active State */
        .sidebar-link.active {
            color: #15803d; /* Green-700 */
            background-color: #f0fdf4; /* Green-50 */
            border-left-color: #15803d;
            font-weight: 700;
        }

        /* Article Link Style */
        .article-item {
            display: flex;
            align-items: center;
            justify-content: space-between; 
            padding: 12px 16px;
            border-bottom: 1px dashed #cbd5e1; 
            transition: all 0.2s;
            gap: 12px;
        }
        .article-item:last-child {
            border-bottom: none;
        }
        .article-item:hover {
            background-color: #f0f9ff; /* Sky-50 hover */
        }

        .article-title {
            flex: 1; 
            font-size: 0.875rem;
            font-weight: 500;
            color: #334155;
        }
        
        /* Floating Button Animation */
        .float-btn {
            transition: transform 0.2s;
        }
        .float-btn:hover {
            transform: scale(1.1);
        }
        .float-btn:active {
            transform: scale(0.95);
        }

        /* Tooltip CSS */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 100px;
            background-color: #334155;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 4px 0;
            position: absolute;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            margin-left: -50px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 10px;
            font-weight: 500;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #334155 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body id="top" class="text-slate-700 antialiased selection:bg-green-100 selection:text-green-900">

    <div class="soft-glow-background">
        <div class="shape shape1"></div>
        <div class="shape shape2"></div>
        <div class="shape shape3"></div>
    </div>

    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-white/50 h-20 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
            <div class="flex items-center justify-between h-full gap-4 lg:gap-8">
                <!-- Link to E-learning home -->
                <a href="https://kiotvietlnd.github.io/elearning/" class="flex-shrink-0 flex items-center gap-3 select-none hover:opacity-80 transition-opacity" title="Về trang chủ E-Learning">
                    <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-6 lg:h-8">
                    <span class="text-slate-300 font-light text-xl lg:text-2xl">|</span>
                    <span class="font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-green-700 tracking-tight text-base lg:text-lg uppercase">E-Learning</span>
                </a>

                <!-- Header buttons -->
                <nav class="hidden lg:flex flex-1 justify-end items-center gap-4">
                    <a href="https://www.kiotviet.vn/ho-tro" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-full font-bold text-sm shadow-md hover:bg-blue-700 hover:-translate-y-0.5 transition-all">
                        <i class="fa-solid fa-book-open-reader"></i> Kho Tài liệu HDSD
                    </a>
                    
                    <a href="https://www.youtube.com/@HDSDPhanmemKiotViet" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-full font-bold text-sm shadow-md hover:bg-red-700 hover:-translate-y-0.5 transition-all">
                        <i class="fa-brands fa-youtube"></i> Kho Video HDSD
                    </a>

                    <a href="#" class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-green-700 text-white rounded-full font-bold text-sm border border-blue-400 shadow-lg transform hover:scale-105 transition-all hover:shadow-green-500/30">
                        <i class="fa-solid fa-scale-balanced"></i> Cẩm nang Thuế HKD
                    </a>
                </nav>
                
                <div class="lg:hidden">
                    <button class="text-slate-600 hover:text-green-700 text-2xl"><i class="fa-solid fa-bars"></i></button>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-0 min-h-[80vh]">
        
        <div class="sticky top-20 z-40 pt-4 pb-4 mb-8 -mx-4 px-4 sm:mx-0 sm:px-0 transition-all">
             <div class="bg-white/60 backdrop-blur-md border border-white/50 shadow-md rounded-2xl p-4 max-w-3xl mx-auto">
                <div class="flex justify-center w-full">
                    <div class="w-full relative group">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa-solid fa-magnifying-glass text-slate-400 group-hover:text-green-600 transition-colors"></i>
                        </div>
                        <input type="text" id="search-input" placeholder="Tìm kiếm Tin tức, Bài Quiz, Kiến thức nền tảng, HDSD..." 
                            class="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 shadow-inner transition-all text-sm text-slate-700 bg-white/80 font-inter">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="flex flex-col lg:flex-row gap-8">
            <aside class="lg:w-1/4 hidden lg:block">
                <div class="sticky top-48 bg-white/90 backdrop-blur rounded-2xl p-4 shadow-md border border-white/50 overflow-y-auto max-h-[calc(100vh-220px)] custom-scrollbar">
                    <h3 class="font-bold text-slate-700 mb-4 px-3 uppercase text-xs tracking-wider border-b border-slate-100 pb-2">Mục lục</h3>
                    <nav id="tax-sidebar" class="space-y-1">
                        <!-- Sidebar content generated by JS -->
                    </nav>
                </div>
            </aside>

            <div class="lg:w-3/4 w-full">
                <div class="mb-6 pl-4 border-l-4 border-green-600" data-aos="fade-down">
                    <h1 class="text-2xl font-black text-slate-800 tracking-tight leading-normal pb-1">
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-green-700">Cẩm nang Thuế HKD</span> <span class="text-slate-400 font-light mx-2">|</span> <span class="text-slate-600">Quy định & Giải pháp từ KiotViet</span>
                    </h1>
                    <p class="text-slate-500 mt-1 font-medium">Tổng hợp kiến thức pháp luật và Bộ giải pháp tuân thủ HĐĐT - Thuế - Kế toán dành cho HKD.</p>
                </div>
                <div id="tax-content">
                    <!-- Content generated by JS -->
                </div>
            </div>
        </div>

    </main>
    
    <footer class="bg-white/60 backdrop-blur-md border-t border-white/50 mt-10 py-8 relative z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="inline-block mb-4">
                <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8 mx-auto">
            </div>
            <p class="text-slate-500 font-medium text-sm">Learning and Development Department</p>
            <p class="text-slate-400 text-xs mt-2">© 2026 KiotViet. All rights reserved.</p>
        </div>
    </footer>

    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-center space-y-3">
        <a href="https://notebooklm.google.com/notebook/17ae9fc0-6d1b-4ab5-ab0f-3f980651062e" target="_blank" title="Hỏi Chatbot AI Thuế" class="float-btn w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-full flex items-center justify-center shadow-lg border-2 border-white hover:scale-110">
            <i class="fa-solid fa-robot"></i>
        </a>
        
        <a href="https://www.youtube.com/watch?v=XYU9FfapH_A&list=PLjB-7CLwd9mG0O35klGjuA6yMueoc8nck" target="_blank" title="Xem Video HĐĐT" class="float-btn w-12 h-12 bg-gradient-to-r from-blue-600 to-green-700 text-white rounded-full flex items-center justify-center shadow-lg border-2 border-white hover:shadow-green-500/50">
            <i class="fa-brands fa-youtube"></i>
        </a>
        
        <a id="scroll-to-top" href="#top" title="Lên đầu Trang" class="hidden w-12 h-12 bg-white text-slate-600 border border-slate-200 rounded-full items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 hover:bg-slate-50">
            <i class="fas fa-arrow-up"></i>
        </a>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AOS.init({ once: true, duration: 800, easing: 'ease-out-cubic', offset: 50 });
            
            const scrollTopBtn = document.getElementById('scroll-to-top');
            window.onscroll = function() {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    scrollTopBtn.classList.remove('hidden');
                    scrollTopBtn.classList.add('flex'); 
                } else {
                    scrollTopBtn.classList.add('hidden');
                    scrollTopBtn.classList.remove('flex');
                }
            };

            renderTaxContent();

            // Search Functionality
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', function(e) {
                const term = e.target.value.toLowerCase();
                const articles = document.querySelectorAll('.article-item');
                
                articles.forEach(article => {
                    let title = '';
                    let desc = '';
                    
                    if (article.classList.contains('article-item')) {
                        title = article.querySelector('.article-title') ? article.querySelector('.article-title').innerText.toLowerCase() : '';
                        desc = article.querySelector('.article-desc') ? article.querySelector('.article-desc').innerText.toLowerCase() : '';
                    }

                    if (title.includes(term) || desc.includes(term)) {
                        article.style.display = 'flex'; 
                    } else {
                        article.style.display = 'none';
                    }
                });

                // Hide empty cards
                const topicCards = document.querySelectorAll('.section-card');
                topicCards.forEach(card => {
                    const visibleArticles = card.querySelectorAll('.article-item:not([style*="display: none"])');
                    if (visibleArticles.length === 0 && term !== '') {
                        card.style.display = 'none';
                    } else {
                        card.style.display = 'block';
                    }
                });
            });
        });

        // --- TAX DATA & RENDERER (FULL DATA) ---
        const taxData = [
            // --- E-LEARNING SECTION ---
            {
                category: "Đào tạo E-Learning",
                sidebarIcon: "fa-graduation-cap",
                topics: [
                    {
                        title: "Hóa đơn điện tử",
                        icon: "fa-graduation-cap",
                        articles: [
                            { title: "Quy trình triển khai Hóa đơn điện tử", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/quy-trinh-hddt-kiotviet", isQuiz: true, isNew: true },
                            { title: "Đăng ký Chữ ký số KiotViet IntrustCA", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/dang-ky-chu-ky-so", isQuiz: true, isNew: true },
                            { title: "Thiết lập Thuế VAT", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/thiet-lap-thue-vat", isQuiz: true, isNew: true },
                            { title: "Bắt đầu sử dụng Hóa đơn điện tử KiotViet eInvoice", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/bat-dau-su-dung-kve", isQuiz: true, isNew: true },
                            { title: "Thiết lập chữ ký số trên KiotViet eInvoice", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/thiet-lap-chu-ky-so", isQuiz: true, isNew: true },
                            { title: "Lập Tờ khai đăng ký Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/lap-to-khai-hddt", isQuiz: true, isNew: true },
                            { title: "Tạo mẫu Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/tao-mau-hddt", isQuiz: true, isNew: true },
                            { title: "Kết nối Phần mềm Hóa đơn điện tử", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/ket-noi-pmbh-hddt-kiotviet", isQuiz: true, isNew: true },
                            { title: "Phát hành Hóa đơn điện tử", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/phat-hanh-hddt", isQuiz: true, isNew: true },
                            { title: "Quản lý Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/quan-ly-hddt-kve", isQuiz: true, isNew: true }
                        ]
                    },
                    {
                        title: "Phần mềm Kế toán",
                        icon: "fa-calculator",
                        articles: [
                            { title: "Sổ kế toán (Theo Thông tư 88)", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/so-ke-toan-tt88", isQuiz: true, isNew: true },
                            { title: "Tờ khai thuế (Theo Thông tư 40)", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/to-khai-thue-tt40", isQuiz: true, isNew: true }
                        ]
                    },
                    {
                        title: "Hóa đơn đầu vào",
                        icon: "fa-file-import",
                        articles: [
                            { title: "Quản lý Hóa đơn đầu vào", guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quiz/hoa-don-dau-vao", isQuiz: true, isNew: true }
                        ]
                    }
                ]
            },
            {
                category: "Tin tức cập nhật",
                sidebarIcon: "fa-bullhorn",
                topics: [
                    {
                        title: "Cập nhật KiotViet eInvoice",
                        icon: "fa-newspaper",
                        articles: [
                            { 
                                title: "Cập nhật Quy trình Đăng ký và Đăng nhập KiotViet eInvoice", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/cap-nhat-luong-dang-ky-kveinvoice", 
                                isNew: true 
                            },
                            { 
                                title: "Cập nhật luồng Kết nối Phần mềm QLBH và Phần mềm HĐĐT KiotViet", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/cap-nhat-luong-ket-noi-pmbh-pmhdt-kiotviet", 
                                isNew: true 
                            }
                        ]
                    }
                ]
            },
            {
                category: "Tìm hiểu Pháp luật",
                sidebarIcon: "fa-scale-balanced",
                topics: [
                    {
                        title: "Thông tư",
                        icon: "fa-book-atlas",
                        articles: [
                            { 
                                title: "Thông tư số 152/2025/TT-BTC (Quy định về Chế độ Kế toán từ 01/01/2026)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/thong-tu-152", 
                                isLegal: true,
                                isNew: true
                            },
                            { 
                                title: "Thông tư số 88/2021/TT-BTC (Quy định về Chế độ Kế toán đến 31/12/2025)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/thong-tu-88", 
                                isLegal: true 
                            },
                            { 
                                title: "Thông tư số 40/2021/TT-BTC (Quy định về PP Tính Thuế)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/thong-tu-40", 
                                isLegal: true 
                            }
                        ]
                    },
                    {
                        title: "Nghị định",
                        icon: "fa-gavel",
                        articles: [
                            { 
                                title: "Nghị định số 70/2025/NĐ-CP (Quy định về HĐĐT)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/nghi-dinh-70", 
                                isLegal: true 
                            }
                        ]
                    },
                    {
                        title: "Luật",
                        icon: "fa-book",
                        articles: [
                            { 
                                title: "Luật Thuế GTGT (Cập nhật cho năm 2026)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/luat-thue-gtgt", 
                                isLegal: true,
                                isNew: true
                            },
                            { 
                                title: "Luật Thuế TNCN (Cập nhật cho năm 2026)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/luat-thue-tncn", 
                                isLegal: true,
                                isNew: true
                            }
                        ]
                    }
                ]
            },
            {
                category: "Kiến thức nền tảng",
                sidebarIcon: "fa-layer-group",
                topics: [
                    {
                        title: "Kế Toán - Thuế",
                        icon: "fa-scale-balanced",
                        articles: [
                            { 
                                title: "Các phương pháp tính thuế cho Hộ kinh doanh (Dự thảo)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/cac-phuong-phap-tinh-thue-hkd", 
                                isLearnMore: true,
                                isNew: true 
                            },
                            { 
                                title: "Sổ Kế toán Hộ kinh doanh (Theo Thông tư 88 và Thông tư 152)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/so-ke-toan-ho-kinh-doanh", 
                                isLearnMore: true,
                                isNew: true
                            },
                            { 
                                title: "Hướng dẫn Nộp thuế cho HKD", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/huong-dan-nop-thue-hkd", 
                                isLearnMore: true 
                            }
                        ]
                    },
                    {
                        title: "Hóa đơn điện tử",
                        icon: "fa-book-open",
                        articles: [
                            { 
                                title: "Hóa đơn điện tử từ máy tính tiền", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/hddt-may-tinh-tien", 
                                isLearnMore: true 
                            },
                            { 
                                title: "Ký hiệu hóa đơn điện tử", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/ky-hieu-hoa-don-dien-tu", 
                                isLearnMore: true 
                            },
                            { 
                                title: "Xử lý hóa đơn sai sót", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/xu-ly-hoa-don-sai-sot", 
                                isLearnMore: true 
                            },
                            { 
                                title: "Quản lý hóa đơn đầu vào", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/quan-ly-hoa-don-dau-vao", 
                                isLearnMore: true 
                            }
                        ]
                    },
                    {
                        title: "Chữ ký số",
                        icon: "fa-signature",
                        articles: [
                            { 
                                title: "Chữ ký số", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/chu-ky-so", 
                                isLearnMore: true 
                            }
                        ]
                    }
                ]
            },
            {
                category: "Công cụ tiện ích",
                sidebarIcon: "fa-toolbox",
                topics: [
                    {
                        title: "Tài khoản demo",
                        icon: "fa-laptop-code",
                        articles: [
                            { 
                                title: "Tài khoản demo KiotViet eInvoice", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/tai-khoan-demo-kv-einvoice", 
                                isLearnMore: true, 
                                isNew: true 
                            }
                        ]
                    },
                    {
                        title: "Video Playlist HDSD",
                        icon: "fa-video",
                        articles: [
                            { 
                                title: "Playlist HDSD Bộ giải pháp KiotViet", 
                                guideLink: "https://www.youtube.com/playlist?list=PL3x3GXJzpHzSig3jxKN_M3M7yaxkIoWlY", 
                                isLearnMore: true, 
                                isExternal: true 
                            }
                        ]
                    },
                    {
                        title: "Công cụ Tra cứu",
                        icon: "fa-magnifying-glass-chart",
                        articles: [
                            { 
                                title: "Xử lý tình huống thường gặp về Hóa đơn điện tử - Chữ ký số", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/xu-ly-tinh-huong", 
                                isLearnMore: true 
                            },
                            { 
                                title: "Tra cứu Mã lỗi phổ biến khi Lập tờ khai", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/tra-cuu-ma-loi-to-khai", 
                                isLearnMore: true 
                            }
                        ]
                    },
                    {
                        title: "Công cụ Tính thuế",
                        icon: "fa-percent",
                        articles: [
                            { 
                                title: "Công cụ Tính thuế Hộ kinh doanh (Phiên bản Beta)", 
                                guideLink: "https://kiotvietlnd.github.io/elearning/thuehkd/tinh-thue-hkd", 
                                isLearnMore: true,
                                isNew: true 
                            }
                        ]
                    }
                ]
            },
            {
                category: "Hướng dẫn sử dụng",
                sidebarIcon: "fa-circle-question",
                topics: [
                    {
                        title: "Hóa đơn điện tử",
                        icon: "fa-file-invoice",
                        articles: [
                            { title: "Quy trình triển khai Hóa đơn điện tử", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/quy-trinh-trien-khai-hoa-don-dien-tu/", isExternal: true },
                            { title: "Đăng ký Chữ ký số KiotViet IntrustCA", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/dang-ky-chu-ky-so-kiotviet-intrustca/", isExternal: true },
                            { title: "Thiết lập Thuế VAT", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/thiet-lap-thue-vat/", isExternal: true },
                            { title: "Bắt đầu sử dụng Hóa đơn điện tử KiotViet eInvoice", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/dang-ky-hoa-don-dien-tu-kiotviet-einvoice/", isExternal: true, isNew: true },
                            { title: "Thiết lập chữ ký số trên KiotViet eInvoice", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/thiet-lap-chu-ky-so-tren-kiotviet-einvoice/", isExternal: true },
                            { title: "Lập Tờ khai đăng ký Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/lap-to-khai-dang-ky-hddt-tren-kiotviet-einvoice/", isExternal: true },
                            { title: "Tạo mẫu Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/tao-mau-hoa-don-dien-tu-tren-kiotviet-einvoice/", isExternal: true },
                            { title: "Kết nối Phần mềm Hóa đơn điện tử", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/ket-noi-phan-mem-hoa-don-dien-tu/", isExternal: true },
                            { title: "Phát hành Hóa đơn điện tử", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/phat-hanh-hoa-don-dien-tu-tren-kiotviet/", isExternal: true },
                            { title: "Quản lý Hóa đơn điện tử trên KiotViet eInvoice", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/quan-ly-hoa-don-dien-tu-tren-kiotviet-einvoice/", isExternal: true }
                        ]
                    },
                    {
                        title: "Phần mềm Kế toán",
                        icon: "fa-calculator",
                        articles: [
                            { title: "Sổ kế toán (Theo Thông tư 88)", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/so-ke-toan/", isExternal: true },
                            { title: "Tờ khai thuế (Theo Thông tư 40)", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-hoa-don-dien-tu/to-khai-thue/", isExternal: true }
                        ]
                    },
                    {
                        title: "Hóa đơn đầu vào",
                        icon: "fa-file-import",
                        articles: [
                            { title: "Quản lý Hóa đơn đầu vào", guideLink: "https://www.kiotviet.vn/huong-dan-su-dung-kiotviet/retail-giao-dich/hoa-don-dau-vao/", isNew: true, isExternal: true }
                        ]
                    }
                ]
            }
        ];

        function renderTaxContent() {
            const sidebar = document.getElementById('tax-sidebar');
            const content = document.getElementById('tax-content');
            let sidebarHtml = '';
            let contentHtml = '';

            const prefixCategories = ["Đào tạo E-Learning", "Tin tức cập nhật", "Kiến thức nền tảng", "Hướng dẫn sử dụng"];

            taxData.forEach((section, index) => {
                const sectionId = `tax-cat-${index}`;
                const activeClass = index === 0 ? 'active' : '';
                
                // Sidebar highlighting logic (Star replaced by specific icon, but can keep star logic if requested, here we use generic icons)
                // Updated to use section.sidebarIcon
                
                // Standard Colors
                const sidebarHighlightClass = 'text-slate-600 hover:text-blue-800 hover:bg-white';
                const sectionNumberClass = 'bg-white text-blue-800 border-blue-200';
                const sectionTitleClass = 'text-blue-900';
                const sectionWrapperClass = '';

                sidebarHtml += `
                    <a href="#${sectionId}" class="sidebar-link ${activeClass} block px-3 py-2 text-sm font-medium rounded-lg transition-colors border-l-2 border-transparent ${sidebarHighlightClass}">
                        <i class="fa-solid ${section.sidebarIcon} mr-2 w-5 text-center text-slate-400 group-hover:text-blue-600"></i>${section.category}
                    </a>
                `;

                contentHtml += `
                    <div id="${sectionId}" class="scroll-mt-24 mb-16 ${sectionWrapperClass}">
                        <div class="flex items-center gap-3 mb-6 pb-2 border-b border-blue-100">
                            <span class="flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm shadow-sm border ${sectionNumberClass}">${index + 1}</span>
                            <h2 class="text-2xl font-bold ${sectionTitleClass}">${section.category}</h2>
                        </div>
                        
                        <div class="grid grid-cols-1 gap-6">
                `;

                section.topics.forEach(topic => {
                    // Check if we need to add prefix
                    const displayTitle = prefixCategories.includes(section.category) 
                        ? `Khám phá Chủ đề: ${topic.title}` 
                        : topic.title;

                    const articlesHtml = topic.articles.map(article => {
                        const newTag = article.isNew ? '<span class="inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold bg-red-500 text-white animate-pulse uppercase tracking-wide shadow-sm">Mới</span>' : '';
                        const targetAttr = article.isExternal || article.isQuiz ? 'target="_blank"' : '';
                        
                        // Updated Buttons:
                        // Quiz: Solid Green #166def
                        // Guide: Solid Blue #166def (Solid Green is typically success/action, Blue is info)
                        // User request: "Vào học ngay màu Xanh lá còn Xem chi tiết màu Xanh dương solid"
                        // Green: bg-green-600, Blue: bg-blue-600
                        if (article.isQuiz) {
                             return `
                                <div class="article-item group/item">
                                    <span class="text-sm font-medium text-slate-700 article-title flex-1 group-hover:text-blue-700 transition-colors">${article.title}</span>
                                    <div class="flex items-center gap-2 shrink-0">
                                        ${newTag}
                                        <a href="${article.guideLink}" ${targetAttr} class="px-3 py-1 text-xs font-bold text-white bg-[#16a34a] hover:bg-green-700 rounded-full transition-all flex items-center gap-1 whitespace-nowrap shadow-sm hover:shadow-lg">
                                            <i class="fa-solid fa-graduation-cap"></i> Vào học ngay
                                        </a>
                                    </div>
                                    <p class="hidden article-desc">Quiz bài kiểm tra</p>
                                </div>
                            `;
                        }

                        // Normal Article Link (Solid Blue)
                        const linkButton = article.guideLink && article.guideLink !== "#" ? 
                            `<a href="${article.guideLink}" ${targetAttr} class="shrink-0 px-3 py-1 text-xs font-bold text-white bg-[#2563eb] hover:bg-blue-700 rounded-full transition-all shadow-sm whitespace-nowrap">
                                Xem Chi tiết <i class="fa-solid fa-arrow-right ml-1"></i>
                            </a>` : 
                            `<div class="tooltip">
                                <span class="shrink-0 px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 rounded-full cursor-not-allowed shadow-sm border border-slate-200">
                                    Đang cập nhật
                                </span>
                                <span class="tooltiptext">Nội dung đang được xây dựng</span>
                            </div>`;

                        if (article.isLegal) {
                            return `
                                <div class="article-item group/item flex flex-col !items-start gap-2 p-4 bg-white rounded-lg border border-slate-200 hover:shadow-md transition-all">
                                    <div class="w-full flex justify-between items-center gap-4">
                                        <span class="text-sm font-bold text-slate-800 article-title flex-1">${article.title}</span>
                                        <div class="flex items-center gap-2 shrink-0">
                                            ${newTag}
                                            ${linkButton}
                                        </div>
                                    </div>
                                    <p class="text-xs text-slate-500 article-desc leading-relaxed text-left">${article.desc || ''}</p>
                                </div>
                            `;
                        } else {
                             // Standard items (HDSD, Learn More) - Using same solid blue style
                             return `
                                <div class="article-item group/item">
                                    <span class="text-sm font-medium text-slate-700 article-title flex-1">${article.title}</span>
                                    <div class="flex items-center gap-2 shrink-0">
                                        ${newTag}
                                        <div class="flex items-center gap-2">
                                            ${linkButton}
                                        </div>
                                    </div>
                                    <p class="hidden article-desc"></p>
                                </div>
                            `;
                        }
                    }).join('');

                    // Standard Colors
                    const cardBg = 'bg-white shadow-md border-white/60';
                    const cardHeaderBg = 'bg-gradient-to-r from-sky-50 to-white border-sky-100';
                    const iconColor = 'text-blue-600 border-blue-100 bg-white';

                    contentHtml += `
                        <div class="section-card rounded-xl overflow-hidden transition-all hover:shadow-xl ${cardBg}">
                            <div class="${cardHeaderBg} p-4 border-b flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center shadow-sm border ${iconColor}">
                                    <i class="fa-solid ${topic.icon} text-lg"></i>
                                </div>
                                <h3 class="font-bold text-lg text-slate-700">${displayTitle}</h3>
                            </div>
                            <div class="p-0">
                                <div class="flex flex-col">
                                    ${articlesHtml}
                                </div>
                            </div>
                        </div>
                    `;
                });

                contentHtml += `</div></div>`;
            });

            sidebar.innerHTML = sidebarHtml;
            content.innerHTML = contentHtml;

            // Intersection Observer for Sidebar Active State
            // Fix highlight jumping: Adjusted rootMargin to look at top of screen mostly
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('.sidebar-link').forEach(link => {
                            link.classList.remove('active');
                            
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-10% 0px -85% 0px' }); // Top 10-15% of screen is trigger zone

            document.querySelectorAll('[id^="tax-cat-"]').forEach(section => {
                observer.observe(section);
            });
        }
    </script>
</body>
</html>
